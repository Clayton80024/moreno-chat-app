(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},18566,(e,t,r)=>{t.exports=e.r(76562)},37264,e=>{"use strict";e.s(["BellIcon",()=>r],37264);var t=e.i(71645);let r=t.forwardRef(function(e,r){let{title:n,titleId:i,...a}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":i},a),n?t.createElement("title",{id:i},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))})},73130,e=>{"use strict";e.s(["UserCircleIcon",()=>r],73130);var t=e.i(71645);let r=t.forwardRef(function(e,r){let{title:n,titleId:i,...a}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":i},a),n?t.createElement("title",{id:i},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},85249,66856,e=>{"use strict";e.s(["ShieldCheckIcon",()=>r],85249);var t=e.i(71645);let r=t.forwardRef(function(e,r){let{title:n,titleId:i,...a}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":i},a),n?t.createElement("title",{id:i},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))});e.s(["PaintBrushIcon",()=>n],66856);let n=t.forwardRef(function(e,r){let{title:n,titleId:i,...a}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":i},a),n?t.createElement("title",{id:i},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"}))})},25489,e=>{"use strict";e.s(["ArrowRightOnRectangleIcon",()=>r],25489);var t=e.i(71645);let r=t.forwardRef(function(e,r){let{title:n,titleId:i,...a}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":i},a),n?t.createElement("title",{id:i},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))})},1401,e=>{"use strict";e.s(["SimpleThemeProvider",()=>i,"useSimpleTheme",()=>a]);var t=e.i(43476),r=e.i(71645);let n=(0,r.createContext)(void 0);function i(e){let{children:i}=e,[a,s]=(0,r.useState)("light"),[l,o]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{u(!0);let e=localStorage.getItem("theme");e&&s(e)},[]),(0,r.useEffect)(()=>{if(!d)return;let e=()=>{let e=document.documentElement,t=!1;"dark"===a?t=!0:"system"===a&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches),t?(e.classList.add("dark"),o(!0)):(e.classList.remove("dark"),o(!1))};if(e(),"system"===a){let t=window.matchMedia("(prefers-color-scheme: dark)");return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}},[a,d]),d)?(0,t.jsx)(n.Provider,{value:{theme:a,setTheme:e=>{s(e),localStorage.setItem("theme",e)},isDark:l},children:i}):(0,t.jsx)("div",{children:i})}function a(){let e=(0,r.useContext)(n);if(!e)throw Error("useSimpleTheme must be used within SimpleThemeProvider");return e}},39931,e=>{"use strict";e.s(["NotificationProvider",()=>s,"NotificationToast",()=>o,"useNotifications",()=>l]);var t=e.i(43476),r=e.i(71645),n=e.i(55344),i=e.i(83642);let a=(0,r.createContext)(void 0);function s(e){let{children:s}=e,[l,o]=(0,r.useState)([]),{friendRequests:d,chats:u,onlineFriends:c}=(0,n.useRealtime)(),{user:m}=(0,i.useAuth)(),f=l.filter(e=>e.userId===(null==m?void 0:m.id)),h=f.filter(e=>!e.read).length,g=(0,r.useCallback)(e=>{if(!(null==m?void 0:m.id))return void console.warn("Cannot add notification: user not logged in");let t={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9),timestamp:new Date().toISOString(),read:!1,userId:m.id};o(e=>[t,...e]),"granted"===Notification.permission&&document.hasFocus()&&new Notification(e.title,{body:e.message,icon:"/favicon.ico",tag:t.id})},[null==m?void 0:m.id]),v=(0,r.useCallback)(e=>{(null==m?void 0:m.id)&&o(t=>t.map(t=>t.id===e&&t.userId===m.id?{...t,read:!0}:t))},[null==m?void 0:m.id]),w=(0,r.useCallback)(()=>{(null==m?void 0:m.id)&&o(e=>e.map(e=>e.userId===m.id?{...e,read:!0}:e))},[null==m?void 0:m.id]),x=(0,r.useCallback)(e=>{(null==m?void 0:m.id)&&o(t=>t.filter(t=>t.id!==e||t.userId!==m.id))},[null==m?void 0:m.id]),p=(0,r.useCallback)(()=>{(null==m?void 0:m.id)&&o(e=>e.filter(e=>e.userId!==m.id))},[null==m?void 0:m.id]);return(0,r.useEffect)(()=>{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()},[]),(0,r.useEffect)(()=>{if(!(null==m?void 0:m.id)||0===d.received.length)return;let e=d.received[0];if(!f.find(t=>{var r;return"friend_request"===t.type&&(null==(r=t.data)?void 0:r.requestId)===e.id})){var t,r,n,i;g({type:"friend_request",title:"New Friend Request",message:"".concat((null==(t=e.sender_profile)?void 0:t.full_name)||(null==(r=e.sender_profile)?void 0:r.username)||"Someone"," wants to be your friend"),data:{requestId:e.id,senderId:e.sender_id,senderName:(null==(n=e.sender_profile)?void 0:n.full_name)||(null==(i=e.sender_profile)?void 0:i.username)}})}},[d.received,g,f,null==m?void 0:m.id]),(0,r.useEffect)(()=>{(null==m?void 0:m.id)&&u.forEach(e=>{if(e.unread_count&&e.unread_count>0){let n=e.last_message;if(n&&n.sender_id!==m.id&&!f.find(e=>{var t;return"message"===e.type&&(null==(t=e.data)?void 0:t.messageId)===n.id})){var t,r;let i=(null==(t=n.sender_profile)?void 0:t.full_name)||(null==(r=n.sender_profile)?void 0:r.username)||"Someone";g({type:"message",title:"direct"===e.type?i:e.name||"Group Chat",message:n.content.length>50?n.content.substring(0,50)+"...":n.content,data:{chatId:e.id,messageId:n.id,senderId:n.sender_id,chatName:e.name||i}})}}})},[u,g,f,null==m?void 0:m.id]),(0,r.useEffect)(()=>{(null==m?void 0:m.id)||o([])},[null==m?void 0:m.id]),(0,r.useEffect)(()=>{if(!(null==m?void 0:m.id))return;let e=new Date(Date.now()-6048e5);o(t=>t.filter(t=>t.userId===m.id&&new Date(t.timestamp)>e))},[null==m?void 0:m.id]),(0,t.jsx)(a.Provider,{value:{notifications:f,unreadCount:h,addNotification:g,markAsRead:v,markAllAsRead:w,removeNotification:x,clearAllNotifications:p},children:s})}function l(){let e=(0,r.useContext)(a);if(void 0===e)throw Error("useNotifications must be used within a NotificationProvider");return e}function o(e){let{notification:n,onClose:i}=e;return(0,r.useEffect)(()=>{let e=setTimeout(()=>{i()},5e3);return()=>clearTimeout(e)},[i]),(0,t.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4 transform transition-all duration-300 ease-in-out",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 ".concat((()=>{switch(n.type){case"friend_request":return"bg-blue-500";case"message":return"bg-green-500";case"friend_accepted":return"bg-purple-500";default:return"bg-gray-500"}})()," rounded-full flex items-center justify-center text-white text-sm"),children:(()=>{switch(n.type){case"friend_request":return"ðŸ‘¥";case"message":return"ðŸ’¬";case"friend_accepted":return"âœ…";default:return"ðŸ””"}})()}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.title}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:n.message}),(0,t.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:new Date(n.timestamp).toLocaleTimeString()})]}),(0,t.jsx)("button",{onClick:i,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}},93610,e=>{"use strict";e.s(["ToastProvider",()=>o,"useToast",()=>d],93610);var t=e.i(43476),r=e.i(71645);let n=r.forwardRef(function(e,t){let{title:n,titleId:i,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),i=r.forwardRef(function(e,t){let{title:n,titleId:i,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),a=r.forwardRef(function(e,t){let{title:n,titleId:i,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))});var s=e.i(63150);let l=r.default.createContext(void 0);function o(e){let{children:n}=e,[i,a]=(0,r.useState)([]),s=e=>{a(t=>t.filter(t=>t.id!==e))};return(0,t.jsxs)(l.Provider,{value:{toasts:i,addToast:e=>{let t=Date.now().toString()+Math.random().toString(36).substr(2,9),r={...e,id:t};a(e=>[...e,r]),setTimeout(()=>{s(t)},e.duration||5e3)},removeToast:s},children:[n,(0,t.jsx)(u,{toasts:i,onRemove:s})]})}function d(){let e=r.default.useContext(l);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e}function u(e){let{toasts:r,onRemove:n}=e;return(0,t.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.map(e=>(0,t.jsx)(c,{toast:e,onRemove:n},e.id))})}function c(e){let{toast:l,onRemove:o}=e,[d,u]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{setTimeout(()=>u(!0),10)},[]),(0,t.jsx)("div",{className:"\n        max-w-sm w-full border rounded-lg shadow-lg p-4 transition-all duration-300 transform\n        ".concat((()=>{switch(l.type){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";default:return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}})(),"\n        ").concat(d?"translate-x-0 opacity-100":"translate-x-full opacity-0","\n      "),children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(()=>{switch(l.type){case"success":return(0,t.jsx)(n,{className:"w-5 h-5 text-green-500"});case"error":return(0,t.jsx)(i,{className:"w-5 h-5 text-red-500"});case"warning":return(0,t.jsx)(s.ExclamationTriangleIcon,{className:"w-5 h-5 text-yellow-500"});default:return(0,t.jsx)(a,{className:"w-5 h-5 text-blue-500"})}})()}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l.title}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:l.message})]}),(0,t.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,t.jsxs)("button",{onClick:()=>{u(!1),setTimeout(()=>o(l.id),300)},className:"inline-flex text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:[(0,t.jsx)("span",{className:"sr-only",children:"Close"}),(0,t.jsx)(i,{className:"w-4 h-4"})]})})]})})}},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);